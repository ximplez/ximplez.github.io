let activatedTitle,articleTitles=[];window.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("toc-container");if(!t)return;checkTocPosition(t),articleTitles=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activatedTitle=articleTitles[0];const n=encodeURI(activatedTitle.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${n}"]`).parentElement.classList.add("active","pe-toc-open")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activatedTitle=Array.from(articleTitles).find(e=>{if(getOffsetTop(e)-window.scrollY>0&&getOffsetTop(e)-window.scrollY<window.innerHeight/2)return e})||activatedTitle,articleTitles.forEach(e=>{const n=encodeURI(e.getAttribute("id")).toLowerCase(),t=document.querySelector(`.inner ul li a[href="#${n}"]`).parentElement;e===activatedTitle?(t.classList.add("active","open"),getAllLIParents(t).forEach(e=>e.classList.add("open"))):t.classList.remove("active","open")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(e=null){if(e=e??document.getElementById("toc-container"),!e)return;const t=document.body.scrollWidth;t-main-toc*2-gap*4>0?e.classList.add("wide"):e.classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}function getAllLIParents(e){let n=[],t=e.parentNode;for(;t!==null;)t.tagName==="LI"&&n.push(t),t=t.parentNode;return n}